#%RAML 1.0
title: Flipkart Purchase Order System API
version: v1
baseUri: http://localhost:8081/api/v1

documentation:
  - title: Flipkart Purchase Order System API
    content: |
      This System API connects to Flipkart's order service and exposes raw order details.
      It follows the System API layer pattern in MuleSoft's three-layer architecture.

types:
  FlipkartOrder:
    type: object
    properties:
      orderId:
        type: string
        required: true
        example: "FK123456789"
      customerInfo:
        type: object
        properties:
          customerId:
            type: string
            required: true
            example: "CUST001"
          customerName:
            type: string
            required: true
            example: "John Doe"
          email:
            type: string
            required: true
            example: "john.doe@email.com"
          phone:
            type: string
            required: true
            example: "+91-9876543210"
      orderDetails:
        type: object
        properties:
          orderDate:
            type: datetime
            required: true
            example: "2024-01-15T10:30:00Z"
          totalAmount:
            type: number
            required: true
            example: 1250.75
          currency:
            type: string
            required: true
            example: "INR"
          status:
            type: string
            enum: [PENDING, CONFIRMED, SHIPPED, DELIVERED, CANCELLED]
            required: true
            example: "CONFIRMED"
      items:
        type: array
        items:
          type: object
          properties:
            itemId:
              type: string
              required: true
              example: "ITEM001"
            productName:
              type: string
              required: true
              example: "Laptop Dell Inspiron"
            quantity:
              type: integer
              required: true
              example: 1
            unitPrice:
              type: number
              required: true
              example: 45000.00
            category:
              type: string
              required: true
              example: "Electronics"
      shippingAddress:
        type: object
        properties:
          addressLine1:
            type: string
            required: true
            example: "123 Main Street"
          addressLine2:
            type: string
            required: false
            example: "Apartment 4B"
          city:
            type: string
            required: true
            example: "Bangalore"
          state:
            type: string
            required: true
            example: "Karnataka"
          postalCode:
            type: string
            required: true
            example: "560001"
          country:
            type: string
            required: true
            example: "India"

  ErrorResponse:
    type: object
    properties:
      errorCode:
        type: string
        required: true
        example: "SYS_001"
      errorMessage:
        type: string
        required: true
        example: "Order not found"
      timestamp:
        type: datetime
        required: true
        example: "2024-01-15T10:30:00Z"

/orders:
  get:
    description: Get all orders from Flipkart system
    queryParameters:
      limit:
        type: integer
        required: false
        default: 10
        example: 20
      offset:
        type: integer
        required: false
        default: 0
        example: 0
      status:
        type: string
        required: false
        enum: [PENDING, CONFIRMED, SHIPPED, DELIVERED, CANCELLED]
        example: "CONFIRMED"
    responses:
      200:
        body:
          application/json:
            type: FlipkartOrder[]
            example: |
              [
                {
                  "orderId": "FK123456789",
                  "customerInfo": {
                    "customerId": "CUST001",
                    "customerName": "John Doe",
                    "email": "john.doe@email.com",
                    "phone": "+91-9876543210"
                  },
                  "orderDetails": {
                    "orderDate": "2024-01-15T10:30:00Z",
                    "totalAmount": 45000.00,
                    "currency": "INR",
                    "status": "CONFIRMED"
                  },
                  "items": [
                    {
                      "itemId": "ITEM001",
                      "productName": "Laptop Dell Inspiron",
                      "quantity": 1,
                      "unitPrice": 45000.00,
                      "category": "Electronics"
                    }
                  ],
                  "shippingAddress": {
                    "addressLine1": "123 Main Street",
                    "city": "Bangalore",
                    "state": "Karnataka",
                    "postalCode": "560001",
                    "country": "India"
                  }
                }
              ]
      400:
        body:
          application/json:
            type: ErrorResponse
      500:
        body:
          application/json:
            type: ErrorResponse

  /{orderId}:
    get:
      description: Get a specific order by ID from Flipkart system
      responses:
        200:
          body:
            application/json:
              type: FlipkartOrder
        404:
          body:
            application/json:
              type: ErrorResponse
        500:
          body:
            application/json:
              type: ErrorResponse

/health:
  get:
    description: Health check endpoint
    responses:
      200:
        body:
          application/json:
            example: |
              {
                "status": "UP",
                "timestamp": "2024-01-15T10:30:00Z"
              }
